
                require('../../../common/runtime.js');
                require('../../../common/vendor.js');
                require('../../../common/main.js');
                (global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/API/share/share"],{

 301:
 (function(module, exports, __webpack_require__) {

"use strict";
(function(createPage) {

__webpack_require__( 4);

__webpack_require__( 5);

var _vue = _interopRequireDefault(__webpack_require__( 2));

var _share = _interopRequireDefault(__webpack_require__( 302));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

createPage(_share.default);
}.call(this, __webpack_require__( 1)["createPage"]))

 }),

 302:
 (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( 303);
 var _share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__( 305);
 for(var __WEBPACK_IMPORT_KEY__ in _share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 var _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__( 14);

var renderjs





var component = Object(_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__["render"],
  _share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null,
  false,
  _share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

if (false) { var api; }
component.options.__file = "src/pages/API/share/share.vue"
 __webpack_exports__["default"] = (component.exports);

 }),

 303:
 (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( 304);
 __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__["render"]; });

 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

 __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

 __webpack_require__.d(__webpack_exports__, "components", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_template_id_73bb9174___WEBPACK_IMPORTED_MODULE_0__["components"]; });



 }),

 304:
 (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
 __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
 __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
 __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



 }),

 305:
 (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
 var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__( 306);
 var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
 for(var __WEBPACK_IMPORT_KEY__ in _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_share_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

 }),

 306:
 (function(module, exports, __webpack_require__) {

"use strict";
(function(uni) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _regenerator = _interopRequireDefault(__webpack_require__( 16));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

var _default = {
  data: function data() {
    return {
      title: 'share',
      shareText: 'uni-app可以同时发布成原生App、小程序、H5，邀请你一起体验！',
      href: "https://uniapp.dcloud.io",
      image: '',
      shareType: 1,
      providerList: []
    };
  },
  computed: {
    isDisableButton: function isDisableButton() {
      return function (item) {
        if (this.shareType === 0 && item.id === 'qq') {
          return true;
        }

        if (this.shareType === 5 && item.name !== '分享到微信好友') {
          return true;
        }

        return false;
      };
    }
  },
  onShareAppMessage: function onShareAppMessage() {
    return {
      title: this.shareText ? this.shareText : "欢迎体验uni-app",
      path: '/pages/tabBar/component/component',
      imageUrl: this.image ? this.image : 'https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png'
    };
  },
  onUnload: function onUnload() {
    this.shareText = 'uni-app可以同时发布成原生App、小程序、H5，邀请你一起体验！', this.href = 'https://uniapp.dcloud.io', this.image = '';
  },
  onLoad: function onLoad() {
    var _this = this;

    uni.getProvider({
      service: 'share',
      success: function success(e) {
        console.log('success', e);
        var data = [];

        for (var i = 0; i < e.provider.length; i++) {
          switch (e.provider[i]) {
            case 'weixin':
              data.push({
                name: '分享到微信好友',
                id: 'weixin',
                sort: 0
              });
              data.push({
                name: '分享到微信朋友圈',
                id: 'weixin',
                type: 'WXSenceTimeline',
                sort: 1
              });
              break;

            case 'sinaweibo':
              data.push({
                name: '分享到新浪微博',
                id: 'sinaweibo',
                sort: 2
              });
              break;

            case 'qq':
              data.push({
                name: '分享到QQ',
                id: 'qq',
                sort: 3
              });
              break;

            default:
              break;
          }
        }

        _this.providerList = data.sort(function (x, y) {
          return x.sort - y.sort;
        });
      },
      fail: function fail(e) {
        console.log('获取分享通道失败', e);
        uni.showModal({
          content: '获取分享通道失败',
          showCancel: false
        });
      }
    });
  },
  methods: {
    share: function () {
      var _share = _asyncToGenerator( _regenerator.default.mark(function _callee(e) {
        var shareOPtions;
        return _regenerator.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                console.log('分享通道:' + e.id + '； 分享类型:' + this.shareType);

                if (!(!this.shareText && (this.shareType === 1 || this.shareType === 0))) {
                  _context.next = 4;
                  break;
                }

                uni.showModal({
                  content: '分享内容不能为空',
                  showCancel: false
                });
                return _context.abrupt("return");

              case 4:
                if (!(!this.image && (this.shareType === 2 || this.shareType === 0))) {
                  _context.next = 7;
                  break;
                }

                uni.showModal({
                  content: '分享图片不能为空',
                  showCancel: false
                });
                return _context.abrupt("return");

              case 7:
                shareOPtions = {
                  provider: e.id,
                  scene: e.type && e.type === 'WXSenceTimeline' ? 'WXSenceTimeline' : 'WXSceneSession',
                  type: this.shareType,
                  success: function success(e) {
                    console.log('success', e);
                    uni.showModal({
                      content: '已分享',
                      showCancel: false
                    });
                  },
                  fail: function fail(e) {
                    console.log('fail', e);
                    uni.showModal({
                      content: e.errMsg,
                      showCancel: false
                    });
                  },
                  complete: function complete() {
                    console.log('分享操作结束!');
                  }
                };
                _context.t0 = this.shareType;
                _context.next = _context.t0 === 0 ? 11 : _context.t0 === 1 ? 16 : _context.t0 === 2 ? 18 : _context.t0 === 5 ? 20 : 24;
                break;

              case 11:
                shareOPtions.summary = this.shareText;
                shareOPtions.imageUrl = this.image;
                shareOPtions.title = '欢迎体验uniapp';
                shareOPtions.href = 'https://uniapp.dcloud.io';
                return _context.abrupt("break", 25);

              case 16:
                shareOPtions.summary = this.shareText;
                return _context.abrupt("break", 25);

              case 18:
                shareOPtions.imageUrl = this.image;
                return _context.abrupt("break", 25);

              case 20:
                shareOPtions.imageUrl = this.image ? this.image : 'https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png';
                shareOPtions.title = '欢迎体验uniapp';
                shareOPtions.miniProgram = {
                  id: 'gh_33446d7f7a26',
                  path: '/pages/tabBar/component/component',
                  webUrl: 'https://uniapp.dcloud.io',
                  type: 0
                };
                return _context.abrupt("break", 25);

              case 24:
                return _context.abrupt("break", 25);

              case 25:
                if (!(shareOPtions.type === 0 && plus.os.name === 'iOS')) {
                  _context.next = 29;
                  break;
                }

                _context.next = 28;
                return this.compress();

              case 28:
                shareOPtions.imageUrl = _context.sent;

              case 29:
                if (shareOPtions.type === 1 && shareOPtions.provider === 'qq') {
                  shareOPtions.href = 'https://uniapp.dcloud.io';
                  shareOPtions.title = '欢迎体验uniapp';
                }

                uni.share(shareOPtions);

              case 31:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function share(_x) {
        return _share.apply(this, arguments);
      }

      return share;
    }(),
    radioChange: function radioChange(e) {
      console.log('type:' + e.detail.value);
      this.shareType = parseInt(e.detail.value);
    },
    chooseImage: function chooseImage() {
      var _this2 = this;

      uni.chooseImage({
        count: 1,
        sourceType: ['album', 'camera'],
        sizeType: ['compressed', 'original'],
        success: function success(res) {
          _this2.image = res.tempFilePaths[0];
        },
        fail: function fail(err) {
          uni.getSetting({
            success: function success(res) {
              var authStatus = res.authSetting['scope.album'] && res.authSetting['scope.camera'];

              if (!authStatus) {
                uni.showModal({
                  title: '授权失败',
                  content: 'Hello uni-app需要从您的相机或相册获取图片，请在设置界面打开相关权限',
                  success: function success(res) {
                    if (res.confirm) {
                      uni.openSetting();
                    }
                  }
                });
              }
            }
          });
        }
      });
    },
    compress: function compress() {
      console.log('开始压缩');
      var img = this.image;
      return new Promise(function (res) {
        var localPath = plus.io.convertAbsoluteFileSystem(img.replace('file://', ''));
        console.log('after' + localPath); 

        plus.io.resolveLocalFileSystemURL(localPath, function (entry) {
          entry.file(function (file) {
            console.log('getFile:' + JSON.stringify(file));

            if (file.size > 20480) {
              plus.zip.compressImage({
                src: img,
                dst: img.replace('.jpg', '2222.jpg').replace('.JPG', '2222.JPG'),
                width: '10%',
                height: '10%',
                quality: 1,
                overwrite: true
              }, function (event) {
                console.log('success zip****' + event.size);
                var newImg = img.replace('.jpg', '2222.jpg').replace('.JPG', '2222.JPG');
                res(newImg);
              }, function (error) {
                uni.showModal({
                  content: '分享图片太大,需要请重新选择图片!',
                  showCancel: false
                });
              });
            }
          });
        }, function (e) {
          console.log('Resolve file URL failed: ' + e.message);
          uni.showModal({
            content: '分享图片太大,需要请重新选择图片!',
            showCancel: false
          });
        });
      });
    }
  }
};
exports.default = _default;
}.call(this, __webpack_require__( 1)["default"]))

 })

},[[301,"common/runtime","common/vendor"]]]);
